{"version":3,"file":"formscript.min.js","sources":["../src/formscript.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for course selection page\n *\n * @module      too/bulkreset\n * @copyright   2025 Ponlawat Weerapanpisit <ponlawat_w@outlook.co.th>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\n/**\n * Binds click event to select all / deselect all buttons.\n */\nexport const init = () => {\n    const $selectallcheckboxes = $('.tool-bulkreset-selectall');\n    const $deselectallcheckboxes = $('.tool-bulkreset-deselectall');\n    const $selectallall = $('#tool-bulkreset-selectallall');\n    const $deselectallall = $('#tool-bulkreset-deselectallall');\n    const $sortselect = $('#tool-bulk_reset-sort_select');\n\n    const setall = (event, value) => {\n        $(event.target).parent().parent().find('input[type=\"checkbox\"]').prop('checked', value);\n    };\n\n    const clickall = array => {\n        $.each(array, (index, element) => {\n            element.click();\n        });\n    };\n\n    $selectallcheckboxes.on('click', e => {\n        setall(e, true);\n    });\n\n    $deselectallcheckboxes.on('click', e => {\n        setall(e, false);\n    });\n\n    $selectallall.on('click', () => {\n        clickall($selectallcheckboxes);\n    });\n\n    $deselectallall.on('click', () => {\n        clickall($deselectallcheckboxes);\n    });\n\n    const locations = location.href.split('?');\n    let params = {};\n    if (locations[1]) {\n        params = locations[1].replace(',', '&').split('&').reduce((obj, curr) => {\n            const paramsegments = curr.split('=');\n            if (paramsegments.length < 2) {\n                return obj;\n            }\n            obj[paramsegments[0]] = decodeURIComponent(paramsegments[1]);\n            return obj;\n        }, {});\n        if (params.sort) {\n            $sortselect.val(params.sort);\n        }\n    }\n\n    $sortselect.on('change', () => {\n        params.sort = $sortselect.val();\n        window.location = location.href.split('?')[0] + `?${Object.keys(params).map(k => `${k}=${encodeURIComponent(params[k])}`)}`;\n    });\n};\n"],"names":["$selectallcheckboxes","$deselectallcheckboxes","$selectallall","$deselectallall","$sortselect","setall","event","value","target","parent","find","prop","clickall","array","each","index","element","click","on","e","locations","location","href","split","params","replace","reduce","obj","curr","paramsegments","length","decodeURIComponent","sort","val","window","Object","keys","map","k","encodeURIComponent"],"mappings":";;;;;;;wJA4BoB,WACVA,sBAAuB,mBAAE,6BACzBC,wBAAyB,mBAAE,+BAC3BC,eAAgB,mBAAE,gCAClBC,iBAAkB,mBAAE,kCACpBC,aAAc,mBAAE,gCAEhBC,OAAS,CAACC,MAAOC,6BACjBD,MAAME,QAAQC,SAASA,SAASC,KAAK,0BAA0BC,KAAK,UAAWJ,QAG/EK,SAAWC,wBACXC,KAAKD,OAAO,CAACE,MAAOC,WAClBA,QAAQC,YAIhBjB,qBAAqBkB,GAAG,SAASC,IAC7Bd,OAAOc,GAAG,MAGdlB,uBAAuBiB,GAAG,SAASC,IAC/Bd,OAAOc,GAAG,MAGdjB,cAAcgB,GAAG,SAAS,KACtBN,SAASZ,yBAGbG,gBAAgBe,GAAG,SAAS,KACxBN,SAASX,iCAGPmB,UAAYC,SAASC,KAAKC,MAAM,SAClCC,OAAS,GACTJ,UAAU,KACVI,OAASJ,UAAU,GAAGK,QAAQ,IAAK,KAAKF,MAAM,KAAKG,QAAO,CAACC,IAAKC,cACtDC,cAAgBD,KAAKL,MAAM,YAC7BM,cAAcC,OAAS,IAG3BH,IAAIE,cAAc,IAAME,mBAAmBF,cAAc,KAF9CF,MAIZ,IACCH,OAAOQ,MACP5B,YAAY6B,IAAIT,OAAOQ,OAI/B5B,YAAYc,GAAG,UAAU,KACrBM,OAAOQ,KAAO5B,YAAY6B,MAC1BC,OAAOb,SAAWA,SAASC,KAAKC,MAAM,KAAK,cAASY,OAAOC,KAAKZ,QAAQa,KAAIC,aAAQA,cAAKC,mBAAmBf,OAAOc"}